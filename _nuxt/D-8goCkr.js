import{I as _,bm as Fe,bn as we,A as K,aM as Q,G as ie,B as E,e as g,D as L,bo as Ae,d as ke,Z as _e,F as Be,aJ as Ke,aD as X,aN as xe,bp as z,bq as Ie,aO as Le,r as k,aF as se,aQ as M,aS as J,w as B,C as V,f as ue,E as t,P as $,br as Ve,bs as $e,g as re,W as R,aI as N,aZ as de,bt as Se,o as Te,c as Pe,aE as ce,bu as Re,bv as Oe}from"./1uYtbs2I.js";import{f as He}from"./C4tmIgK3.js";function De(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function Me(u){return _(()=>Fe(u)?!!we(u)?.closest("form"):!0)}const le=K({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(u){const a=u,{primitiveElement:n,currentElement:r}=Q(),s=_(()=>a.checked??a.value);return ie(s,(l,c)=>{if(!r.value)return;const v=r.value,d=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(d,"value").set;if(b&&l!==c){const p=new Event("input",{bubbles:!0}),w=new Event("change",{bubbles:!0});b.call(v,l),v.dispatchEvent(p),v.dispatchEvent(w)}}),(l,c)=>(g(),E(Ae,L({ref_key:"primitiveElement",ref:n},{...a,...l.$attrs},{as:"input"}),null,16))}}),Ne=K({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(u){const a=u,n=_(()=>typeof a.value=="object"&&Array.isArray(a.value)&&a.value.length===0&&a.required),r=_(()=>typeof a.value=="string"||typeof a.value=="number"||typeof a.value=="boolean"?[{name:a.name,value:a.value}]:typeof a.value=="object"&&Array.isArray(a.value)?a.value.flatMap((s,l)=>typeof s=="object"?Object.entries(s).map(([c,v])=>({name:`[${a.name}][${l}][${c}]`,value:v})):{name:`[${a.name}][${l}]`,value:s}):a.value!==null&&typeof a.value=="object"&&!Array.isArray(a.value)?Object.entries(a.value).map(([s,l])=>({name:`[${a.name}][${s}]`,value:l})):[]);return(s,l)=>n.value?(g(),E(le,L({key:s.name},{...a,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(g(!0),ke(Be,{key:1},_e(r.value,c=>(g(),E(le,L({key:c.name,ref_for:!0},{...a,...s.$attrs},{name:c.name,value:c.value}),null,16,["name","value"]))),128))}});function qe(u,a,n){return u===void 0?!1:Array.isArray(u)?u.some(r=>P(r,a,n)):P(u,a,n)}function P(u,a,n){return u===void 0||a===void 0?!1:typeof u=="string"?u===a:typeof n=="function"?n(u,a):typeof n=="string"?u?.[n]===a?.[n]:Ke(u,a)}const[Y,je]=X("ListboxRoot"),Xe=K({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(u,{expose:a,emit:n}){const r=u,s=n,{multiple:l,highlightOnHover:c,orientation:v,disabled:d,selectionBehavior:C,dir:b}=xe(r),{getItems:p}=z({isProvider:!0}),{handleTypeaheadSearch:w}=Ie(),{primitiveElement:O,currentElement:m}=Q(),A=De(),H=Le(b),fe=Me(m),D=k(),S=k(!1),q=k(!0),h=se(r,"modelValue",s,{defaultValue:r.defaultValue??(l.value?[]:void 0),passive:r.modelValue===void 0,deep:!0});function ve(e){if(S.value=!0,r.multiple){const o=Array.isArray(h.value)?[...h.value]:[],i=o.findIndex(f=>P(f,e,r.by));r.selectionBehavior==="toggle"?(i===-1?o.push(e):o.splice(i,1),h.value=o):(h.value=[e],D.value=e)}else r.selectionBehavior==="toggle"&&P(h.value,e,r.by)?h.value=void 0:h.value=e;setTimeout(()=>{S.value=!1},1)}const y=k(null),j=k(null),x=k(!1),G=k(!1),ee=J(),U=J(),te=J();function W(){return p().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function F(e,o=!0){if(!e)return;y.value=e,q.value&&y.value.focus(),o&&y.value.scrollIntoView({block:"nearest"});const i=p().find(f=>f.ref===e);s("highlight",i)}function pe(e){if(x.value)te.trigger(e);else{const o=p().find(i=>P(i.value,e,r.by));o&&(y.value=o.ref,F(o.ref))}}function me(e){y.value&&y.value.isConnected&&(e.preventDefault(),e.stopPropagation(),G.value||y.value.click())}function he(e){if(q.value){if(S.value=!0,x.value)U.trigger(e);else{const o=e.altKey||e.ctrlKey||e.metaKey;if(o&&e.key==="a"&&l.value){const i=p(),f=i.map(I=>I.value);h.value=[...f],e.preventDefault(),F(i[i.length-1].ref)}else if(!o){const i=w(e.key,p());i&&F(i)}}setTimeout(()=>{S.value=!1},1)}}function ye(){G.value=!0}function be(){requestAnimationFrame(()=>{G.value=!1})}function ae(){M(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ne(e)})}function Z(e){const o=y.value;o?.isConnected&&(j.value=o),y.value=null,s("leave",e)}function ge(e){const o=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(o),s("entryFocus",o),!o.defaultPrevented)if(j.value)F(j.value);else{const i=W()?.[0];F(i)}}function ne(e){const o=Ve(e,v.value,H.value);if(!o)return;let i=W();if(y.value){if(o==="last")i.reverse();else if(o==="prev"||o==="next"){o==="prev"&&i.reverse();const f=i.indexOf(y.value);i=i.slice(f+1)}Ee(e,i[0])}if(i.length){const f=!y.value&&o==="prev"?i.length-1:0;F(i[f])}if(x.value)return U.trigger(e)}function Ee(e,o){if(!(x.value||r.selectionBehavior!=="replace"||!l.value||!Array.isArray(h.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const f=p().filter(T=>T.ref.dataset.disabled!=="");let I=f.find(T=>T.ref===o)?.value;if(e.key===A.END?I=f[f.length-1].value:e.key===A.HOME&&(I=f[0].value),!I||!D.value)return;const Ce=He(f.map(T=>T.value),D.value,I);h.value=Ce}}async function oe(e){if(await M(),x.value)ee.trigger(e);else{const o=W(),i=o.find(f=>f.dataset.state==="checked");i?F(i):o.length&&F(o[0])}}return ie(h,()=>{S.value||M(()=>{oe()})},{immediate:!0,deep:!0}),a({highlightedElement:y,highlightItem:pe,highlightFirstItem:ae,highlightSelected:oe,getItems:p}),je({modelValue:h,onValueChange:ve,multiple:l,orientation:v,dir:H,disabled:d,highlightOnHover:c,highlightedElement:y,isVirtual:x,virtualFocusHook:ee,virtualKeydownHook:U,virtualHighlightHook:te,by:r.by,firstValue:D,selectionBehavior:C,focusable:q,onLeave:Z,onEnter:ge,changeHighlight:F,onKeydownEnter:me,onKeydownNavigation:ne,onKeydownTypeAhead:he,onCompositionStart:ye,onCompositionEnd:be,highlightFirstItem:ae}),(e,o)=>(g(),E(t($),{ref_key:"primitiveElement",ref:O,as:e.as,"as-child":e.asChild,dir:t(H),"data-disabled":t(d)?"":void 0,onPointerleave:Z,onFocusout:o[0]||(o[0]=async i=>{const f=i.relatedTarget||i.target;await M(),y.value&&t(m)&&!t(m).contains(f)&&Z(i)})},{default:B(()=>[V(e.$slots,"default",{modelValue:t(h)}),t(fe)&&e.name?(g(),E(t(Ne),{key:0,name:e.name,value:t(h),disabled:t(d),required:e.required},null,8,["name","value","disabled","required"])):ue("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),ze=K({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(u){const{CollectionSlot:a}=z(),n=Y(),r=$e(!1,10);return(s,l)=>(g(),E(t(a),null,{default:B(()=>[re(t($),{role:"listbox",as:s.as,"as-child":s.asChild,tabindex:t(n).focusable.value?t(n).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(n).orientation.value,"aria-multiselectable":!!t(n).multiple.value,"data-orientation":t(n).orientation.value,onMousedown:l[0]||(l[0]=N(c=>r.value=!0,["left"])),onFocus:l[1]||(l[1]=c=>{t(r)||t(n).onEnter(c)}),onKeydown:[l[2]||(l[2]=R(N(c=>{t(n).focusable.value&&t(n).onKeydownNavigation(c)},["prevent"]),["down","up","left","right","home","end"])),R(t(n).onKeydownEnter,["enter"]),t(n).onKeydownTypeAhead]},{default:B(()=>[V(s.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[Ye,Ge]=X("ListboxGroup"),et=K({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(u){const a=u,n=de(void 0,"reka-listbox-group");return Ge({id:n}),(r,s)=>(g(),E(t($),L({role:"group"},a,{"aria-labelledby":t(n)}),{default:B(()=>[V(r.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),tt=K({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(u,{emit:a}){const n=u,s=se(n,"modelValue",a,{defaultValue:"",passive:n.modelValue===void 0}),l=Y(),{primitiveElement:c,currentElement:v}=Q(),d=_(()=>n.disabled||l.disabled.value||!1),C=k();return Se(()=>C.value=l.highlightedElement.value?.id),Te(()=>{l.focusable.value=!1,setTimeout(()=>{n.autoFocus&&v.value?.focus()},1)}),Pe(()=>{l.focusable.value=!0}),(b,p)=>(g(),E(t($),{ref_key:"primitiveElement",ref:c,as:b.as,"as-child":b.asChild,value:t(s),disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"aria-disabled":d.value??void 0,"aria-activedescendant":C.value,type:"text",onKeydown:[R(N(t(l).onKeydownNavigation,["prevent"]),["down","up","home","end"]),R(t(l).onKeydownEnter,["enter"])],onInput:p[0]||(p[0]=w=>{s.value=w.target.value,t(l).highlightFirstItem(w)}),onCompositionstart:t(l).onCompositionStart,onCompositionend:t(l).onCompositionEnd},{default:B(()=>[V(b.$slots,"default",{modelValue:t(s)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Ue="listbox.select",[We,Ze]=X("ListboxItem"),at=K({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(u,{emit:a}){const n=u,r=a,s=de(void 0,"reka-listbox-item"),{CollectionItem:l}=z(),{forwardRef:c,currentElement:v}=ce(),d=Y(),C=_(()=>v.value===d.highlightedElement.value),b=_(()=>qe(d.modelValue.value,n.value,d.by)),p=_(()=>d.disabled.value||n.disabled);async function w(m){r("select",m),!m?.defaultPrevented&&!p.value&&m&&(d.onValueChange(n.value),d.changeHighlight(v.value))}function O(m){const A={originalEvent:m,value:n.value};Oe(Ue,w,A)}return Ze({isSelected:b}),(m,A)=>(g(),E(t(l),{value:m.value},{default:B(()=>[Re([C.value,b.value],()=>re(t($),L({id:t(s)},m.$attrs,{ref:t(c),role:"option",tabindex:t(d).focusable.value?C.value?"0":"-1":-1,"aria-selected":b.value,as:m.as,"as-child":m.asChild,disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"data-highlighted":C.value?"":void 0,"data-state":b.value?"checked":"unchecked",onClick:O,onKeydown:R(N(O,["prevent"]),["space"]),onPointermove:A[0]||(A[0]=H=>{t(d).highlightedElement.value!==t(v)&&(t(d).highlightOnHover.value?t(d).changeHighlight(t(v),!1):t(d).focusable.value||t(d).changeHighlight(t(v),!1))})}),{default:B(()=>[V(m.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),A,1)]),_:3},8,["value"]))}}),nt=K({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(u){const a=u;ce();const n=We();return(r,s)=>t(n).isSelected.value?(g(),E(t($),L({key:0,"aria-hidden":"true"},a),{default:B(()=>[V(r.$slots,"default")]),_:3},16)):ue("",!0)}});export{tt as _,ze as a,et as b,at as c,nt as d,Xe as e,Ne as f,Y as g,Ye as i,Me as u};
